<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Captcha Solver</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            padding-top: 20px;
            padding-bottom: 20px;
        }
        .container {
            max-width: 800px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 10px;
            background-color: #ffffff;
        }
        .captcha-image {
            max-width: 100%;
            height: auto;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .loading-spinner {
            display: none; /* Hidden by default */
            width: 3rem;
            height: 3rem;
        }
        .error-message {
            color: #dc3545;
            font-weight: bold;
            margin-top: 15px;
        }
        .success-message {
            color: #28a745;
            font-weight: bold;
            margin-top: 15px;
        }
        .form-label {
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 class="text-center mb-4">AI Captcha Solver</h1>

        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="mb-3">
                    <label for="imageUrl" class="form-label">Image URL:</label>
                    <input type="text" class="form-control" id="imageUrl" placeholder="Enter image URL or leave blank for sample">
                </div>

                <div class="text-center mb-4">
                    <button id="solveButton" class="btn btn-primary btn-lg">Solve Captcha</button>
                </div>

                <div id="loadingIndicator" class="text-center mb-4">
                    <div class="spinner-border loading-spinner text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>

                <div id="resultArea" class="text-center">
                    <img id="captchaImage" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" alt="Captcha Image" class="captcha-image">
                    <p id="errorMessage" class="error-message"></p>
                    <p id="successMessage" class="success-message"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample image data URI (replace with your actual sample image if needed)
        const defaultImageUrl = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";

        // Get DOM elements
        const imageUrlInput = document.getElementById('imageUrl');
        const solveButton = document.getElementById('solveButton');
        const captchaImage = document.getElementById('captchaImage');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');

        // Function to display error messages
        function displayError(message) {
            errorMessage.textContent = message;
            successMessage.textContent = ''; // Clear success message
            loadingIndicator.style.display = 'none'; // Hide spinner
            solveButton.disabled = false; // Re-enable button
        }

        // Function to display success messages
        function displaySuccess(message) {
            successMessage.textContent = message;
            errorMessage.textContent = ''; // Clear error message
            loadingIndicator.style.display = 'none'; // Hide spinner
            solveButton.disabled = false; // Re-enable button
        }

        // Function to show loading state
        function showLoading() {
            errorMessage.textContent = '';
            successMessage.textContent = '';
            loadingIndicator.style.display = 'block'; // Show spinner
            solveButton.disabled = true; // Disable button while loading
        }

        // Function to solve captcha
        async function solveCaptcha() {
            showLoading(); // Show loading indicator

            let url = imageUrlInput.value.trim();

            // If input is empty, use the default sample URL
            if (!url) {
                url = defaultImageUrl;
            }

            // Update the image source
            captchaImage.src = url;

            // Simulate an API call to a captcha solving service
            // In a real application, you would make a fetch request here
            // to your backend or a third-party captcha solving API.
            // For this example, we'll simulate a delay and a random outcome.
            try {
                await new Promise(resolve => setTimeout(resolve, 2000)); // Simulate network latency

                // Simulate a successful solve
                const simulatedResult = "SOLVED_TEXT_" + Math.random().toString(36).substring(7).toUpperCase();
                displaySuccess(`Captcha solved: ${simulatedResult}`);

                // In a real scenario, you might want to clear the input or do something else
                // imageUrlInput.value = '';

            } catch (error) {
                console.error("Captcha solving failed:", error);
                displayError("Failed to solve captcha. Please try again.");
            }
        }

        // Event listener for the solve button
        solveButton.addEventListener('click', solveCaptcha);

        // Handle URL parameter on page load
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const imageUrlFromParam = urlParams.get('url');

            if (imageUrlFromParam) {
                imageUrlInput.value = imageUrlFromParam;
                // Optionally, auto-solve if URL is provided
                // solveCaptcha();
            } else {
                // Set the default image if no URL is provided in the query string
                captchaImage.src = defaultImageUrl;
            }
        });

        // Initialize the image on load if no URL parameter is present
        if (!new URLSearchParams(window.location.search).has('url')) {
            captchaImage.src = defaultImageUrl;
        }
    </script>
</body>
</html>